@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Dynamic.puml

title C4 Dynamic Container Diagram - Authentication, Hotel, and Flight Booking
left to right direction

Person(Reiziger, "Reiziger", "A traveler using the system to book a vacation")

System_Boundary(AppBoundary, "TripTop") {
    Container(Frontend, "Frontend", "React/JavaScript", "Handles user input and forwards requests")

    Container_Boundary(BackendBoundary, "Backend") {
        Component(LoginController, "LoginController", "Springboot / Java", "Handles login requests")
        Component(LoginService, "LoginService", "Springboot / Java", "Business logic for authentication")
        Component(LoginRepository, "LoginRepository", "Springboot / Java", "Stores/retrieves user data")

        Component(HotelController, "HotelController", "Springboot / Java", "Handles hotel booking requests")
        Component(HotelService, "HotelService", "Springboot / Java", "Business logic for hotel booking")

        Component(VluchtController, "VluchtController", "Springboot / Java", "Handles flight booking requests")
        Component(VluchtService, "VluchtService", "Springboot / Java", "Business logic for flight booking")
    }

    ContainerDb(Externe_Database, "External Database", "SQL Server", "Stores user and booking data")
}

System_Ext(IdentityProvider, "Identity Provider", "Validates user identity")
System_Ext(BookingComAPI, "Booking.com API", "Fetches hotel information")
System_Ext(AirscraperAPI, "Airscraper API", "Fetches flight information")

Rel(Reiziger, Frontend, "Logs in and books vacation", $techn="HTTP/JSON")
Rel(Frontend, LoginController, "Forwards login request", $techn="HTTP/JSON")
Rel(LoginController, LoginService, "Delegates login task", $techn="")
Rel(LoginService, IdentityProvider, "Validates credentials", $techn="")
Rel(LoginService, LoginRepository, "Accesses user data", $techn="")
Rel(LoginRepository, Externe_Database, "Retrieves user data", $techn="SQL")


Rel(Frontend, HotelController, "Sends hotel booking request", $techn="HTTP/JSON")
Rel(HotelController, HotelService, "Delegates hotel booking task", $techn="")
Rel(HotelService, BookingComAPI, "Fetches hotel data", $techn="HTTP/JSON")

Rel(Frontend, VluchtController, "Sends flight booking request", $techn="HTTP/JSON")
Rel(VluchtController, VluchtService, "Delegates flight booking task", $techn="")
Rel(VluchtService, AirscraperAPI, "Fetches flight data", $techn="HTTP/JSON")

SHOW_LEGEND(true)
@enduml
